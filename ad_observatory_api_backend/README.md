# Ad Observatory API Backend

# To run server
1. Setup virtualenv `virtualenv venv -p python3.7 && source venv/bin/activate && pip install -r requirements.txt`
2. The server uses environ vars for most configuration info. here is a sample command to start the server:
```
AD_INFO_DATABASE_DBNAME=fb_us_ads_2020 \
AD_INFO_DATABASE_HOST=<INSERT VALUE HERE> \
AD_INFO_DATABASE_PASSWORD=<INSERT VALUE HERE> \
AD_INFO_DATABASE_PORT=5432 \
AD_INFO_DATABASE_USER=ad_screener_backend_readonly \
AD_OBSERVATORY_OAUTH_CLIENT_ID=<INSERT VALUE HERE> \
AD_OBSERVATORY_OAUTH_CLIENT_SECRET=<INSERT VALUE HERE> \
AD_OBSERVATORY_OAUTH_IDENTITY_PROVIDER_HOST=<INSERT VALUE HERE> \
AD_OBSERVATORY_API_USER_DATABASE_DBNAME=ad_screener_dev \
AD_OBSERVATORY_API_USER_DATABASE_HOST=<INSERT VALUE HERE> \
AD_OBSERVATORY_API_USER_DATABASE_PASSWORD=<INSERT VALUE HERE> \
AD_OBSERVATORY_API_USER_DATABASE_PORT=5432 \
AD_OBSERVATORY_API_USER_DATABASE_USER=ad_screener_backend \
AD_SCREENER_ES_CLUSTER=<INSERT VALUE HERE> \
AD_OBSERVATORY_OAUTH_REDIRECT_URL=http://localhost:5000/api/v1/authorize \
AD_OBSERVATORY_AUTHORIZATION_SUCCESS_REDIRECT_URL=http://localhost:3000/ \
DEBUG_LOG_NOTIFICATIONS_REQUESTS=1 \
FLASK_APP_SECRET_KEY='<INSERT VALUE HERE>' \
NOTIFICATIONS_DATABASE_DBNAME=notifications \
NOTIFICATIONS_DATABASE_HOST=<INSERT VALUE HERE> \
NOTIFICATIONS_DATABASE_PASSWORD='<INSERT VALUE HERE>' \
NOTIFICATIONS_DATABASE_PORT=5432 \
NOTIFICATIONS_DATABASE_USER=notifications_backend \
python -m application
```
(you'll need to fill in `<INSERT VALUE HERE>` fields with appropriate passwords,
hostnames, etc

Now you should be up and running.
